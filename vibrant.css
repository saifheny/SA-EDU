/* ================================================================
   SA EDU — VIBRANT COLORFUL REDESIGN
   Rich colors • Mobile-first • Premium feel
   ================================================================ */

/* ── DESIGN TOKENS ──────────────────────────────────────────────── */
:root {
    /* Core backgrounds */
    --c-bg:        #08080c;
    --c-surface:   #0d0d12;
    --c-card:      #11111a;
    --c-elevated:  #16161f;
    --c-hover:     #1c1c28;
    --c-input:     #0f0f18;

    /* Brand colors */
    --c-blue:      #3b82f6;
    --c-blue-dim:  rgba(59,130,246,0.12);
    --c-blue-glow: rgba(59,130,246,0.25);

    --c-green:     #10b981;
    --c-green-dim: rgba(16,185,129,0.12);

    --c-purple:    #8b5cf6;
    --c-purple-dim:rgba(139,92,246,0.12);

    --c-gold:      #f59e0b;
    --c-gold-dim:  rgba(245,158,11,0.12);

    --c-pink:      #ec4899;
    --c-pink-dim:  rgba(236,72,153,0.12);

    --c-cyan:      #06b6d4;
    --c-cyan-dim:  rgba(6,182,212,0.12);

    --c-red:       #ef4444;

    /* Text */
    --c-text:      #e8e8f0;
    --c-text-2:    #888898;
    --c-text-3:    #44444a;

    /* Borders */
    --c-border:    rgba(255,255,255,0.06);
    --c-border-2:  rgba(255,255,255,0.1);
    --c-border-3:  rgba(255,255,255,0.15);

    /* Gradients */
    --g-blue:   linear-gradient(135deg, #1e40af, #3b82f6);
    --g-green:  linear-gradient(135deg, #065f46, #10b981);
    --g-purple: linear-gradient(135deg, #4c1d95, #8b5cf6);
    --g-gold:   linear-gradient(135deg, #92400e, #f59e0b);
    --g-pink:   linear-gradient(135deg, #831843, #ec4899);
    --g-cyan:   linear-gradient(135deg, #164e63, #06b6d4);

    /* Radii */
    --r-xs: 8px;
    --r-sm: 12px;
    --r-md: 16px;
    --r-lg: 22px;
    --r-xl: 28px;
    --r-pill: 999px;
}

/* ── BASE ───────────────────────────────────────────────────────── */
body {
    background: var(--c-bg) !important;
    color: var(--c-text) !important;
}

/* ── NAVIGATION ─────────────────────────────────────────────────── */
.top-nav {
    background: rgba(8,8,12,0.96) !important;
    border-top: 1px solid var(--c-border) !important;
    backdrop-filter: blur(24px) !important;
}
.nav-btn { color: var(--c-text-3) !important; }
.nav-btn span { font-size: 0.7rem !important; }
.nav-btn.active { color: var(--c-text) !important; }
.nav-btn.active i { color: var(--c-blue) !important; }

/* AI tab - special glow */
.nav-btn.magic-btn {
    background: linear-gradient(135deg, rgba(139,92,246,0.15), rgba(59,130,246,0.1)) !important;
    border: 1px solid rgba(139,92,246,0.2) !important;
    border-radius: 14px !important;
    color: #a78bfa !important;
}
.nav-btn.magic-btn.active { color: #c4b5fd !important; }

/* ── PORTAL BACKGROUNDS ─────────────────────────────────────────── */
.portal-container, .app-section,
#teacher-app, #student-app {
    background: var(--c-bg) !important;
}

/* ── EXAM / TEST CARDS ──────────────────────────────────────────── */
.test-card {
    background: var(--c-card) !important;
    border: 1px solid var(--c-border) !important;
    border-radius: var(--r-lg) !important;
    overflow: hidden;
    transition: all 0.2s ease !important;
    position: relative;
}
.test-card::before {
    content: '';
    position: absolute;
    top: 0; right: 0; left: 0;
    height: 2px;
    background: var(--g-blue);
    opacity: 0;
    transition: opacity 0.2s;
}
.test-card:hover {
    background: var(--c-elevated) !important;
    border-color: var(--c-border-2) !important;
    transform: translateY(-1px) !important;
    box-shadow: 0 8px 30px rgba(0,0,0,0.6) !important;
}
.test-card:hover::before { opacity: 1; }

/* Subject color coding */
.test-card[data-subject="فيزياء"] { border-left: 3px solid var(--c-cyan) !important; }
.test-card[data-subject="كيمياء"] { border-left: 3px solid var(--c-green) !important; }
.test-card[data-subject="رياضيات"] { border-left: 3px solid var(--c-blue) !important; }
.test-card[data-subject="أحياء"] { border-left: 3px solid #22c55e !important; }
.test-card[data-subject="لغة عربية"] { border-left: 3px solid var(--c-gold) !important; }
.test-card[data-subject="لغة إنجليزية"] { border-left: 3px solid var(--c-purple) !important; }

/* ── CTA CARDS ─────────────────────────────────────────────────── */
.create-exam-cta {
    background: linear-gradient(135deg, #0d0d20, #111128) !important;
    border: 1px solid rgba(59,130,246,0.15) !important;
    border-radius: var(--r-lg) !important;
    position: relative;
    overflow: hidden;
}
.create-exam-cta::after {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(135deg, rgba(59,130,246,0.03) 0%, rgba(139,92,246,0.03) 100%);
    pointer-events: none;
}
.create-exam-cta:hover {
    border-color: rgba(59,130,246,0.3) !important;
    box-shadow: 0 0 30px rgba(59,130,246,0.08) !important;
}
.cta-icon-wrapper {
    background: linear-gradient(135deg, rgba(59,130,246,0.15), rgba(139,92,246,0.1)) !important;
    border: 1px solid rgba(59,130,246,0.2) !important;
    color: var(--c-blue) !important;
    border-radius: var(--r-md) !important;
}

/* Student analytics CTA */
.student-stats-cta {
    background: linear-gradient(135deg, #0d1a0f, #111a14) !important;
    border-color: rgba(16,185,129,0.15) !important;
}
.student-stats-cta:hover { border-color: rgba(16,185,129,0.3) !important; }
.student-stats-cta .cta-icon-wrapper {
    background: linear-gradient(135deg, rgba(16,185,129,0.15), rgba(6,182,212,0.1)) !important;
    border-color: rgba(16,185,129,0.2) !important;
    color: var(--c-green) !important;
}

/* ── SEARCH BAR ─────────────────────────────────────────────────── */
.google-bar {
    background: var(--c-card) !important;
    border: 1px solid var(--c-border) !important;
    border-radius: var(--r-pill) !important;
    color: var(--c-text) !important;
    padding: 12px 42px 12px 16px !important;
    font-family: 'Cairo', sans-serif !important;
    transition: all 0.2s !important;
}
.google-bar:focus {
    background: var(--c-elevated) !important;
    border-color: rgba(59,130,246,0.35) !important;
    box-shadow: 0 0 0 3px rgba(59,130,246,0.07) !important;
}
.google-bar::placeholder { color: var(--c-text-3) !important; }
.search-icon { color: var(--c-text-3) !important; }

/* ── USER SEARCH MODAL ──────────────────────────────────────────── */
#user-search-modal .bottom-sheet-content {
    background: var(--c-surface) !important;
    border-top: 1px solid var(--c-border) !important;
    border-radius: 24px 24px 0 0 !important;
}
.chat-search-bar {
    background: var(--c-card) !important;
    border: 1px solid var(--c-border) !important;
    border-radius: var(--r-pill) !important;
    padding: 8px 16px !important;
    display: flex !important;
    align-items: center !important;
    gap: 10px !important;
}
.chat-search-bar input {
    background: transparent !important;
    border: none !important;
    color: var(--c-text) !important;
    flex: 1 !important;
    font-family: 'Cairo', sans-serif !important;
    font-size: 0.9rem !important;
}
.chat-search-bar input::placeholder { color: var(--c-text-3) !important; }

/* Search ID input + button combo */
#user-search-modal .chat-search-bar {
    background: var(--c-card) !important;
    border: 1px solid var(--c-border-2) !important;
    border-radius: var(--r-pill) !important;
    padding: 6px 6px 6px 16px !important;
    gap: 8px !important;
}
#user-search-id-input {
    background: transparent !important;
    border: none !important;
    color: var(--c-text) !important;
    flex: 1 !important;
    font-family: 'Cairo', sans-serif !important;
    font-size: 0.9rem !important;
    outline: none !important;
    direction: ltr !important;
    letter-spacing: 0.05em;
}
#user-search-id-input::placeholder {
    color: var(--c-text-3) !important;
    direction: rtl !important;
    letter-spacing: 0;
}

/* The search button - attractive pill style */
#user-search-modal .modern-btn,
button[onclick="searchUserById()"] {
    background: linear-gradient(135deg, #2563eb, #3b82f6) !important;
    color: #fff !important;
    border: none !important;
    border-radius: var(--r-pill) !important;
    padding: 10px 20px !important;
    font-size: 0.88rem !important;
    font-weight: 700 !important;
    font-family: 'Cairo', sans-serif !important;
    cursor: pointer !important;
    min-width: 80px !important;
    transition: all 0.2s !important;
    box-shadow: 0 4px 16px rgba(37,99,235,0.35) !important;
    display: flex !important;
    align-items: center !important;
    gap: 6px !important;
}
button[onclick="searchUserById()"]:hover {
    transform: scale(1.03) !important;
    box-shadow: 0 6px 20px rgba(37,99,235,0.5) !important;
}

/* Search result card */
.search-result-card {
    display: flex;
    align-items: center;
    gap: 14px;
    background: var(--c-card);
    border: 1px solid var(--c-border-2);
    border-radius: var(--r-lg);
    padding: 14px 16px;
    margin-top: 16px;
    animation: slideUpFade 0.3s ease;
}
@keyframes slideUpFade {
    from { opacity:0; transform:translateY(8px); }
    to   { opacity:1; transform:translateY(0); }
}
.src-avatar {
    width: 50px; height: 50px;
    border-radius: 50%;
    background: var(--c-elevated);
    border: 1.5px solid;
    display: flex; align-items: center; justify-content: center;
    font-size: 1.3rem;
    flex-shrink: 0;
}
.src-info { flex: 1; min-width: 0; }
.src-name { font-weight: 700; font-size: 1rem; color: var(--c-text); }
.src-role { font-size: 0.78rem; margin-top: 2px; display: flex; align-items: center; gap: 5px; }
.src-uid { font-size: 0.72rem; color: var(--c-text-3); margin-top: 3px; font-family: monospace; letter-spacing: 0.05em; }
.src-chat-btn {
    width: 42px; height: 42px;
    border-radius: 50%;
    background: var(--c-blue-dim);
    border: 1px solid rgba(59,130,246,0.2);
    color: var(--c-blue);
    font-size: 1rem;
    cursor: pointer;
    display: flex; align-items: center; justify-content: center;
    transition: all 0.2s;
    flex-shrink: 0;
}
.src-chat-btn:hover {
    background: var(--c-blue);
    color: #fff;
    box-shadow: 0 4px 16px var(--c-blue-glow);
}
.search-result-empty {
    display: flex; flex-direction: column; align-items: center;
    gap: 8px; padding: 30px 20px;
    color: var(--c-text-3); font-size: 0.85rem;
}
.search-result-empty i { font-size: 2rem; opacity: 0.3; }
.search-result-empty.error { color: var(--c-red); }
.search-result-empty.error i { color: var(--c-red); }

/* ── AI CHAT MESSAGES ───────────────────────────────────────────── */
.ai-layout { background: var(--c-bg) !important; }
.ai-top-bar { background: var(--c-bg) !important; border-bottom: 1px solid var(--c-border) !important; }
.ai-messages { background: var(--c-bg) !important; padding: 16px 0 140px !important; }

/* AI message - flows naturally, no forced breaks */
.chat-msg-wrap {
    padding: 4px 16px !important;
    max-width: 800px !important;
    margin: 0 auto !important;
    width: 100% !important;
}
.chat-msg-wrap.user { align-items: flex-end !important; }
.chat-msg-wrap.ai {
    align-items: flex-start !important;
    flex-direction: row !important;
    gap: 10px !important;
}

/* User bubble */
.chat-msg.user {
    background: var(--c-elevated) !important;
    border: 1px solid var(--c-border-2) !important;
    border-radius: 18px 18px 4px 18px !important;
    color: var(--c-text) !important;
    padding: 10px 16px !important;
    max-width: 82% !important;
    font-size: 0.93rem !important;
    line-height: 1.6 !important;
    word-wrap: break-word !important;
    white-space: normal !important;
}

/* AI bubble - full width, no line break forced */
.chat-msg.ai {
    background: transparent !important;
    border: none !important;
    padding: 2px 0 !important;
    max-width: calc(100% - 44px) !important;
    font-size: 0.93rem !important;
    color: var(--c-text) !important;
    word-wrap: break-word !important;
    overflow-wrap: break-word !important;
    white-space: normal !important;
    min-width: 0 !important;
    flex: 1 !important;
}

/* Paragraphs in AI response — flowing text */
.chat-msg.ai .ai-p {
    margin: 0 0 10px !important;
    line-height: 1.75 !important;
    color: var(--c-text) !important;
    display: block !important;
    white-space: normal !important;
}
.chat-msg.ai .ai-p:last-child { margin-bottom: 0 !important; }

/* Headings in AI response */
.chat-msg.ai .ai-h1 {
    font-size: 1.1rem; font-weight: 700; color: #fff;
    margin: 14px 0 6px; padding-bottom: 6px;
    border-bottom: 1px solid var(--c-border);
}
.chat-msg.ai .ai-h2 {
    font-size: 1rem; font-weight: 700; color: #e0e0f0;
    margin: 12px 0 5px;
}
.chat-msg.ai .ai-h3 {
    font-size: 0.95rem; font-weight: 600; color: #c8c8e0;
    margin: 10px 0 4px;
}

/* Lists */
.chat-msg.ai .ai-ul,
.chat-msg.ai .ai-ol {
    padding-right: 20px !important;
    margin: 6px 0 10px !important;
}
.chat-msg.ai .ai-li-bul,
.chat-msg.ai .ai-li-num {
    margin-bottom: 4px !important;
    color: var(--c-text) !important;
    line-height: 1.65 !important;
}

/* Bold */
.chat-msg.ai strong { color: #fff !important; font-weight: 700 !important; }
.chat-msg.ai em { color: #c4b5fd !important; font-style: italic !important; }

/* Inline code */
.ai-inline-code {
    background: rgba(139,92,246,0.12) !important;
    color: #a78bfa !important;
    padding: 2px 6px !important;
    border-radius: 5px !important;
    font-size: 0.85em !important;
    font-family: 'Courier New', monospace !important;
}

/* Code block */
.ai-code-block {
    background: #0a0a14 !important;
    border: 1px solid rgba(139,92,246,0.15) !important;
    border-radius: var(--r-md) !important;
    margin: 10px 0 !important;
    overflow: hidden !important;
    position: relative !important;
}
.ai-code-block pre {
    margin: 0 !important;
    padding: 14px 16px !important;
    overflow-x: auto !important;
    border: none !important;
    background: transparent !important;
}
.ai-code-block code {
    color: #86efac !important;
    font-family: 'Courier New', monospace !important;
    font-size: 0.82rem !important;
    line-height: 1.6 !important;
}
.ai-copy-code-btn {
    position: absolute !important;
    top: 8px !important;
    left: 8px !important;
    background: rgba(255,255,255,0.06) !important;
    border: 1px solid var(--c-border) !important;
    color: var(--c-text-2) !important;
    border-radius: var(--r-xs) !important;
    padding: 4px 8px !important;
    font-size: 0.75rem !important;
    cursor: pointer !important;
    transition: all 0.15s !important;
}
.ai-copy-code-btn:hover {
    background: rgba(255,255,255,0.12) !important;
    color: var(--c-text) !important;
}

/* AI avatar */
.ai-msg-avatar {
    width: 28px !important; height: 28px !important;
    border-radius: 50% !important;
    background: linear-gradient(135deg, #10b981, #0d8a6b) !important;
    display: flex !important; align-items: center !important; justify-content: center !important;
    font-size: 0.7rem !important; color: #fff !important;
    flex-shrink: 0 !important;
    margin-top: 2px !important;
    box-shadow: 0 2px 10px rgba(16,185,129,0.3) !important;
}

/* Input area */
.gemini-input-wrapper {
    background: linear-gradient(to top, var(--c-bg) 65%, transparent) !important;
    padding: 10px 14px 22px !important;
}
.gemini-input-container {
    background: var(--c-card) !important;
    border: 1px solid var(--c-border-2) !important;
    border-radius: 22px !important;
    padding: 10px 12px !important;
    max-width: 740px !important;
    margin: 0 auto !important;
    display: flex !important;
    align-items: flex-end !important;
    gap: 8px !important;
    transition: border-color 0.2s !important;
}
.gemini-input-container:focus-within {
    border-color: rgba(59,130,246,0.3) !important;
    box-shadow: 0 0 0 3px rgba(59,130,246,0.06) !important;
}
.gemini-text-input {
    flex: 1 !important;
    background: transparent !important;
    border: none !important;
    color: var(--c-text) !important;
    font-family: 'Cairo', sans-serif !important;
    font-size: 0.94rem !important;
    outline: none !important;
    line-height: 1.5 !important;
    min-height: 24px !important;
    white-space: normal !important;
    word-wrap: break-word !important;
    overflow-wrap: break-word !important;
    resize: none !important;
}
.gemini-text-input::placeholder { color: var(--c-text-3) !important; }
.gemini-send-btn {
    background: #fff !important; color: #000 !important;
    border: none !important; border-radius: 50% !important;
    width: 34px !important; height: 34px !important;
    display: flex !important; align-items: center !important; justify-content: center !important;
    cursor: pointer !important; font-size: 0.9rem !important;
    transition: all 0.15s !important;
    flex-shrink: 0 !important; align-self: flex-end !important;
}
.gemini-send-btn:hover { background: #e5e5e5 !important; transform: scale(1.05) !important; }
.gemini-mic-btn {
    background: transparent !important; border: none !important;
    color: var(--c-text-2) !important;
    width: 34px !important; height: 34px !important;
    border-radius: 50% !important; display: flex !important;
    align-items: center !important; justify-content: center !important;
    cursor: pointer !important; font-size: 1rem !important;
    transition: all 0.15s !important; flex-shrink: 0 !important;
    align-self: flex-end !important;
}
.gemini-mic-btn:hover { background: rgba(255,255,255,0.06) !important; }
.gemini-img-btn { align-self: flex-end !important; }

/* AI action buttons */
.msg-ai-actions {
    display: flex; gap: 4px;
    margin-top: 8px;
    margin-right: 0;
    opacity: 0;
    transition: opacity 0.2s;
}
.chat-msg-wrap.ai:hover .msg-ai-actions { opacity: 1; }
.msg-action-btn {
    background: transparent !important;
    border: none !important; border-radius: var(--r-xs) !important;
    color: var(--c-text-3) !important; padding: 4px 8px !important;
    font-size: 0.78rem !important; cursor: pointer !important;
    display: flex !important; align-items: center !important; gap: 4px !important;
    transition: all 0.15s !important;
}
.msg-action-btn:hover { background: var(--c-card) !important; color: var(--c-text-2) !important; }
.msg-action-btn.liked { color: var(--c-green) !important; }

/* ── DARDASHA / CHAT ────────────────────────────────────────────── */
.chat-sidebar {
    background: var(--c-bg) !important;
    border-left: 1px solid var(--c-border) !important;
}
.chat-sidebar-header {
    background: var(--c-bg) !important;
    border-bottom: 1px solid var(--c-border) !important;
    padding: 14px 16px !important;
}
.chat-window, .chat-msgs-area {
    background: var(--c-bg) !important;
    background-image: none !important;
}
.chat-input-area {
    background: rgba(8,8,12,0.97) !important;
    border-top: 1px solid var(--c-border) !important;
    backdrop-filter: blur(20px) !important;
}

/* Chat list items */
.chat-item {
    border-radius: var(--r-md) !important;
    transition: background 0.15s !important;
    margin: 2px 8px !important;
}
.chat-item:hover { background: var(--c-card) !important; }
.chat-item.active {
    background: linear-gradient(135deg, rgba(59,130,246,0.08), rgba(139,92,246,0.05)) !important;
    border: 1px solid rgba(59,130,246,0.12) !important;
}

/* Chat bubbles */
.chat-bubble {
    border-radius: 18px !important;
    max-width: 80% !important;
    word-wrap: break-word !important;
    white-space: normal !important;
    line-height: 1.55 !important;
    font-size: 0.92rem !important;
}
.chat-bubble.mine {
    background: linear-gradient(135deg, #1e3a8a, #2563eb) !important;
    color: #fff !important;
    border-radius: 18px 18px 4px 18px !important;
}
.chat-bubble.theirs {
    background: var(--c-card) !important;
    border: 1px solid var(--c-border) !important;
    color: var(--c-text) !important;
    border-radius: 18px 18px 18px 4px !important;
}

/* Chat input */
.chat-input-area input {
    background: var(--c-card) !important;
    border: 1px solid var(--c-border) !important;
    border-radius: var(--r-pill) !important;
    color: var(--c-text) !important;
    padding: 10px 16px !important;
    font-family: 'Cairo', sans-serif !important;
    font-size: 0.92rem !important;
}
.chat-input-area input:focus {
    border-color: rgba(59,130,246,0.35) !important;
    box-shadow: 0 0 0 3px rgba(59,130,246,0.07) !important;
}

/* Chat send button */
.chat-send-btn, button[onclick*="sendMsg"], button[onclick*="sendChat"] {
    background: var(--g-blue) !important;
    color: #fff !important; border: none !important;
    border-radius: 50% !important;
    width: 40px !important; height: 40px !important;
    display: flex !important; align-items: center !important; justify-content: center !important;
    box-shadow: 0 4px 12px rgba(37,99,235,0.4) !important;
    cursor: pointer !important; transition: all 0.2s !important;
}
.chat-send-btn:hover { transform: scale(1.07) !important; }

/* Voice room entry button */
.voice-room-entry-btn {
    background: var(--c-purple-dim) !important;
    border: 1px solid rgba(139,92,246,0.2) !important;
    color: var(--c-purple) !important;
    border-radius: var(--r-sm) !important;
}

/* ── REESE / FEED ───────────────────────────────────────────────── */
.reese-input-trigger {
    background: var(--c-card) !important;
    border: 1px solid var(--c-border) !important;
    border-radius: var(--r-lg) !important;
    padding: 14px 16px !important;
    display: flex !important; align-items: center !important; gap: 12px !important;
    cursor: pointer !important; transition: all 0.2s !important;
}
.reese-input-trigger:hover {
    border-color: var(--c-border-2) !important;
    background: var(--c-elevated) !important;
}
.reese-placeholder { color: var(--c-text-3) !important; flex: 1 !important; font-size: 0.9rem !important; }
.reese-avatar-mini {
    width: 36px !important; height: 36px !important;
    border-radius: 50% !important;
    background: var(--c-elevated) !important;
    border: 1px solid var(--c-border-2) !important;
    flex-shrink: 0 !important;
}

/* Reese post cards */
.reese-post-card {
    background: var(--c-card) !important;
    border: 1px solid var(--c-border) !important;
    border-radius: var(--r-lg) !important;
    overflow: hidden !important;
    transition: border-color 0.2s !important;
    margin-bottom: 12px !important;
}
.reese-post-card:hover { border-color: var(--c-border-2) !important; }

/* Post action buttons */
.post-action-btn, .like-btn, .comment-btn, .share-btn {
    color: var(--c-text-3) !important;
    background: transparent !important;
    border: none !important;
    border-radius: var(--r-xs) !important;
    padding: 6px 10px !important;
    cursor: pointer !important;
    transition: all 0.15s !important;
    font-size: 0.82rem !important;
    display: flex !important; align-items: center !important; gap: 5px !important;
}
.post-action-btn:hover { color: var(--c-text) !important; background: var(--c-elevated) !important; }
.post-action-btn.liked { color: var(--c-pink) !important; }

/* ── XP HUD ─────────────────────────────────────────────────────── */
.xp-hud {
    background: linear-gradient(135deg, #0d0d1a, #111128) !important;
    border: 1px solid rgba(59,130,246,0.1) !important;
    border-radius: var(--r-lg) !important;
    margin-bottom: 16px !important;
}
.xp-level-badge {
    background: var(--c-gold-dim) !important;
    border: 1px solid rgba(245,158,11,0.2) !important;
    color: var(--c-gold) !important;
    border-radius: var(--r-pill) !important;
    padding: 4px 12px !important;
    font-size: 0.78rem !important;
    font-weight: 700 !important;
}
.xp-streak {
    background: rgba(239,68,68,0.08) !important;
    border: 1px solid rgba(239,68,68,0.15) !important;
    border-radius: var(--r-pill) !important;
    padding: 4px 10px !important;
    font-size: 0.78rem !important;
}
.xp-total {
    background: var(--c-gold-dim) !important;
    border: 1px solid rgba(245,158,11,0.15) !important;
    border-radius: var(--r-pill) !important;
    padding: 4px 10px !important;
    font-size: 0.78rem !important;
}
.xp-daily-bar {
    background: var(--c-elevated) !important;
    border-radius: var(--r-pill) !important;
    height: 6px !important;
    overflow: hidden !important;
}
.xp-daily-fill {
    background: linear-gradient(90deg, #3b82f6, #8b5cf6) !important;
    border-radius: var(--r-pill) !important;
    height: 100% !important;
    transition: width 0.6s ease !important;
}
.xp-daily-goal-label {
    color: var(--c-text-3) !important;
    font-size: 0.76rem !important;
    margin-bottom: 6px !important;
}

/* ── BUTTONS ─────────────────────────────────────────────────────── */
.modern-btn {
    border-radius: var(--r-pill) !important;
    font-weight: 700 !important;
    font-family: 'Cairo', sans-serif !important;
    transition: all 0.2s !important;
    padding: 12px 28px !important;
}
.modern-btn.secondary {
    background: var(--c-elevated) !important;
    color: var(--c-text-2) !important;
    border: 1px solid var(--c-border-2) !important;
    box-shadow: none !important;
}
.modern-btn.secondary:hover { background: var(--c-hover) !important; }

/* Save/publish = green */
.modern-btn[style*="var(--success)"], #btn-save-test {
    background: linear-gradient(135deg, #065f46, #10b981) !important;
    color: #fff !important;
    box-shadow: 0 4px 16px rgba(16,185,129,0.3) !important;
}

/* ── INPUTS ─────────────────────────────────────────────────────── */
.smart-input, select {
    background: var(--c-input) !important;
    border: 1px solid var(--c-border-2) !important;
    color: var(--c-text) !important;
    border-radius: var(--r-sm) !important;
    font-family: 'Cairo', sans-serif !important;
    padding: 12px 16px !important;
    transition: all 0.2s !important;
}
.smart-input:focus, select:focus {
    border-color: rgba(59,130,246,0.4) !important;
    background: #0d0d18 !important;
    box-shadow: 0 0 0 3px rgba(59,130,246,0.07) !important;
    outline: none !important;
}
select option { background: #111 !important; color: #e8e8f0 !important; }

/* ── MODALS ─────────────────────────────────────────────────────── */
.full-screen-overlay, #menu-modal {
    background: var(--c-bg) !important;
}
.bottom-sheet-content {
    background: var(--c-surface) !important;
    border-radius: 24px 24px 0 0 !important;
    border-top: 1px solid var(--c-border) !important;
}

/* ── MENU ITEMS ─────────────────────────────────────────────────── */
.menu-item {
    background: var(--c-card) !important;
    border: 1px solid var(--c-border) !important;
    border-radius: var(--r-md) !important;
    padding: 14px 18px !important;
    margin-bottom: 10px !important;
    display: flex !important; align-items: center !important; gap: 14px !important;
    cursor: pointer !important; transition: all 0.2s !important;
}
.menu-item:hover {
    background: var(--c-elevated) !important;
    border-color: var(--c-border-2) !important;
    transform: translateX(-3px) !important;
}
.menu-item i { font-size: 1.2rem !important; }

/* ── BACK BUTTON ─────────────────────────────────────────────────── */
.back-btn-header {
    background: var(--c-card) !important;
    border: 1px solid var(--c-border) !important;
    border-radius: var(--r-pill) !important;
    color: var(--c-text-2) !important;
    padding: 8px 16px !important;
    font-size: 0.85rem !important;
    display: inline-flex !important;
    align-items: center !important; gap: 8px !important;
    cursor: pointer !important; transition: all 0.15s !important;
    margin-bottom: 16px !important;
}
.back-btn-header:hover {
    background: var(--c-elevated) !important;
    color: var(--c-text) !important;
    border-color: var(--c-border-2) !important;
}

/* ── ALERTS & TOASTS ────────────────────────────────────────────── */
.sa-alert-box {
    background: var(--c-surface) !important;
    border: 1px solid var(--c-border-2) !important;
    border-radius: var(--r-xl) !important;
    box-shadow: 0 20px 60px rgba(0,0,0,1) !important;
    padding: 28px 24px !important;
}
.sa-alert-title { color: var(--c-text) !important; font-size: 1.1rem !important; font-weight: 700 !important; }
.sa-alert-msg { color: var(--c-text-2) !important; font-size: 0.9rem !important; }
.sa-alert-icon { font-size: 2.2rem !important; margin-bottom: 12px !important; }

.sa-toast {
    background: var(--c-card) !important;
    border: 1px solid var(--c-border-2) !important;
    border-radius: var(--r-md) !important;
    box-shadow: 0 8px 30px rgba(0,0,0,0.8) !important;
}
.sa-toast.success .sa-toast-icon { background: var(--c-green-dim) !important; color: var(--c-green) !important; }
.sa-toast.error .sa-toast-icon { background: rgba(239,68,68,0.1) !important; color: var(--c-red) !important; }
.sa-toast.info .sa-toast-icon { background: var(--c-blue-dim) !important; color: var(--c-blue) !important; }
.sa-toast.msg .sa-toast-icon { background: var(--c-purple-dim) !important; color: var(--c-purple) !important; }
.sa-toast-title { color: var(--c-text) !important; font-weight: 600 !important; }
.sa-toast-sub { color: var(--c-text-2) !important; }

/* ── LANDING PAGE ─────────────────────────────────────────────── */
.landing-wrap {
    background: #000 !important;
    display: flex !important;
    flex-direction: column !important;
    align-items: center !important;
    justify-content: center !important;
    height: 100% !important;
    padding: 40px 30px !important;
}
.landing-avatar-img {
    filter: drop-shadow(0 0 40px rgba(59,130,246,0.3)) !important;
}

/* ── AUTH PAGE ─────────────────────────────────────────────────── */
#auth-layer {
    background: #000 !important;
}
.role-toggle-container {
    background: var(--c-card) !important;
    border: 1px solid var(--c-border) !important;
    border-radius: var(--r-pill) !important;
    padding: 4px !important;
    display: flex !important;
    gap: 4px !important;
    margin-bottom: 24px !important;
}
.role-toggle-btn {
    background: transparent !important;
    border: none !important;
    color: var(--c-text-3) !important;
    border-radius: var(--r-pill) !important;
    padding: 8px 24px !important;
    font-family: 'Cairo', sans-serif !important;
    font-weight: 700 !important;
    font-size: 0.9rem !important;
    cursor: pointer !important;
    transition: all 0.2s !important;
}
.role-toggle-btn.active {
    background: var(--c-elevated) !important;
    color: var(--c-text) !important;
    border: 1px solid var(--c-border-2) !important;
}

/* ── AVATAR FRAMES ─────────────────────────────────────────────── */
.avatar-frame {
    background: var(--c-card) !important;
    border: 1.5px solid var(--c-border-2) !important;
}
.avatar-frame.avatar-student { color: var(--c-blue) !important; border-color: rgba(59,130,246,0.2) !important; }
.avatar-frame.avatar-teacher { color: var(--c-gold) !important; border-color: rgba(245,158,11,0.2) !important; }
.avatar-option {
    background: var(--c-card) !important;
    border: 1px solid var(--c-border) !important;
    border-radius: var(--r-sm) !important;
    color: var(--c-text-3) !important;
    width: 56px !important; height: 56px !important;
    display: flex !important; align-items: center !important; justify-content: center !important;
    font-size: 1.4rem !important; cursor: pointer !important;
    transition: all 0.2s !important;
}
.avatar-option:hover {
    border-color: rgba(59,130,246,0.3) !important;
    background: var(--c-elevated) !important;
    color: var(--c-blue) !important;
    transform: scale(1.08) !important;
}

/* ── COMPOSE OVERLAY ─────────────────────────────────────────────── */
.compose-overlay {
    background: var(--c-bg) !important;
    position: fixed !important;
    inset: 0 !important;
    z-index: 2000 !important;
    display: none !important;
    flex-direction: column !important;
    overflow: hidden !important;
}
.compose-overlay.open { display: flex !important; }
.compose-header {
    background: var(--c-bg) !important;
    border-bottom: 1px solid var(--c-border) !important;
    padding: 14px 20px !important;
    display: flex !important;
    justify-content: space-between !important;
    align-items: center !important;
}
.compose-textarea {
    background: transparent !important;
    border: none !important;
    color: var(--c-text) !important;
    font-family: 'Cairo', sans-serif !important;
    font-size: 1.05rem !important;
    resize: none !important;
    outline: none !important;
    width: 100% !important;
    line-height: 1.7 !important;
}

/* ── EMPTY STATES — VIBRANT VERSION ─────────────────────────────── */
.empty-state-container {
    display: flex !important;
    flex-direction: column !important;
    align-items: center !important;
    justify-content: center !important;
    padding: 70px 30px !important;
    text-align: center !important;
    animation: emptyIn 0.45s cubic-bezier(0.34,1.56,0.64,1) both !important;
}
@keyframes emptyIn {
    from { opacity:0; transform:scale(0.88) translateY(12px); }
    to   { opacity:1; transform:scale(1) translateY(0); }
}
.empty-avatar {
    width: 76px !important; height: 76px !important;
    background: var(--c-card) !important;
    border: 1px solid var(--c-border) !important;
    border-radius: 50% !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    margin-bottom: 20px !important;
    position: relative !important;
    animation: none !important;
}
.empty-avatar::after {
    content: '' !important;
    position: absolute !important;
    inset: -10px !important;
    border-radius: 50% !important;
    border: 1px solid rgba(255,255,255,0.03) !important;
    animation: emptyRing 4s ease-in-out infinite !important;
}
@keyframes emptyRing {
    0%,100% { transform: scale(1); opacity:0.5; }
    50% { transform: scale(1.15); opacity:0; }
}
.empty-avatar i {
    font-size: 1.6rem !important;
    color: var(--c-text-3) !important;
}
.empty-state-container h3 {
    font-size: 0.95rem !important;
    font-weight: 600 !important;
    color: #3a3a4a !important;
    margin: 0 0 8px !important;
}
.empty-state-container p {
    font-size: 0.8rem !important;
    color: #2a2a3a !important;
    margin: 0 !important;
    line-height: 1.6 !important;
    max-width: 200px !important;
}
.empty-action-btn {
    margin-top: 20px !important;
    background: transparent !important;
    border: 1px solid var(--c-border-2) !important;
    color: var(--c-text-2) !important;
    padding: 9px 20px !important;
    border-radius: var(--r-pill) !important;
    font-size: 0.83rem !important;
    font-family: 'Cairo', sans-serif !important;
    cursor: pointer !important;
    transition: all 0.2s !important;
    display: flex !important; align-items: center !important; gap: 8px !important;
}
.empty-action-btn:hover {
    background: var(--c-blue-dim) !important;
    border-color: rgba(59,130,246,0.25) !important;
    color: var(--c-blue) !important;
}

/* ── SKELETON ─────────────────────────────────────────────────── */
.skeleton-loader {
    background: var(--c-card) !important;
    border: 1px solid var(--c-border) !important;
    border-radius: var(--r-lg) !important;
    padding: 16px !important;
    margin-bottom: 12px !important;
    position: relative !important;
    overflow: hidden !important;
}
.skeleton-loader::after {
    content: '' !important;
    position: absolute !important;
    inset: 0 !important;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.025), transparent) !important;
    animation: shimmerSlide 1.6s infinite !important;
}
@keyframes shimmerSlide {
    from { transform: translateX(100%); }
    to   { transform: translateX(-100%); }
}
.skeleton-circle { background: var(--c-elevated) !important; }
.skeleton-line { background: var(--c-elevated) !important; border-radius: 4px !important; }
.skeleton-rect { background: var(--c-elevated) !important; border-radius: var(--r-sm) !important; }

/* ── SCROLLBARS ─────────────────────────────────────────────────── */
* { scrollbar-width: thin; scrollbar-color: #1c1c28 transparent; }
::-webkit-scrollbar { width: 3px; height: 3px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: var(--c-elevated); border-radius: 3px; }

/* ── TAB DOTS ─────────────────────────────────────────────────── */
.tab-dots {
    position: fixed !important;
    bottom: 72px !important;
    left: 50% !important;
    transform: translateX(-50%) !important;
    display: flex !important;
    gap: 5px !important;
    align-items: center !important;
    z-index: 100 !important;
    background: rgba(8,8,12,0.8) !important;
    padding: 5px 10px !important;
    border-radius: var(--r-pill) !important;
    backdrop-filter: blur(10px) !important;
}
.tab-dot {
    width: 5px !important; height: 5px !important;
    border-radius: 50% !important;
    background: #222 !important;
    transition: all 0.3s cubic-bezier(0.34,1.56,0.64,1) !important;
}
.tab-dot.active {
    background: #fff !important;
    width: 18px !important;
    border-radius: 3px !important;
}

/* ── PENDING DEEPLINK BANNER ────────────────────────────────────── */
.pending-link-banner {
    background: linear-gradient(135deg, #1e3a8a, #2563eb) !important;
    box-shadow: 0 2px 20px rgba(37,99,235,0.4) !important;
}

/* ── LOADING ─────────────────────────────────────────────────────── */
#construction-overlay { background: #000 !important; }
.construction-loader {
    width: 32px !important; height: 32px !important;
    border: 2px solid var(--c-card) !important;
    border-top-color: var(--c-blue) !important;
    border-radius: 50% !important;
    animation: spin 0.7s linear infinite !important;
}
@keyframes spin { to { transform: rotate(360deg); } }
.construction-text { color: var(--c-text-2) !important; font-size: 0.85rem !important; letter-spacing: 0.1em !important; }
.construction-sub { color: var(--c-text-3) !important; font-size: 0.75rem !important; }

/* ── AI WELCOME SCREEN ──────────────────────────────────────────── */
.ai-logo-large {
    background: linear-gradient(135deg, #10b981, #0d8a6b) !important;
    box-shadow: 0 8px 32px rgba(16,185,129,0.25) !important;
}
.ai-welcome-title { color: var(--c-text) !important; }
.ai-welcome-text { color: var(--c-text-2) !important; }
.ai-chip {
    background: var(--c-card) !important;
    border: 1px solid var(--c-border-2) !important;
    color: var(--c-text-2) !important;
    border-radius: var(--r-md) !important;
    padding: 10px 16px !important;
    cursor: pointer !important; transition: all 0.2s !important;
    font-size: 0.83rem !important;
    display: flex !important; align-items: center !important; gap: 8px !important;
}
.ai-chip i { color: var(--c-green) !important; }
.ai-chip:hover {
    background: var(--c-elevated) !important;
    border-color: rgba(16,185,129,0.2) !important;
    color: var(--c-text) !important;
    transform: translateY(-2px) !important;
    box-shadow: 0 4px 16px rgba(16,185,129,0.1) !important;
}

/* AI model chip */
.ai-model-chip {
    background: rgba(16,185,129,0.08) !important;
    border: 1px solid rgba(16,185,129,0.15) !important;
    color: #6ee7b7 !important;
    border-radius: var(--r-pill) !important;
    padding: 5px 14px !important;
    font-size: 0.82rem !important; font-weight: 600 !important;
    display: flex !important; align-items: center !important; gap: 6px !important;
    font-family: 'Outfit', sans-serif !important;
}
.ai-model-dot {
    width: 7px !important; height: 7px !important;
    border-radius: 50% !important;
    background: var(--c-green) !important;
    box-shadow: 0 0 6px var(--c-green) !important;
}

/* AI action buttons */
.ai-action-btn { border-radius: var(--r-xs) !important; transition: all 0.15s !important; }
.ai-action-btn.new-chat { color: var(--c-green) !important; }
.ai-action-btn.history { color: var(--c-gold) !important; }
.ai-action-btn.incognito.active { color: var(--c-red) !important; background: rgba(239,68,68,0.1) !important; }
.ai-action-btn:hover { background: var(--c-card) !important; }

/* ── VOICE ROOMS ─────────────────────────────────────────────────── */
.vr-panel {
    background: var(--c-bg) !important;
    border-top: 1px solid var(--c-border) !important;
}
.vr-create-box {
    background: var(--c-card) !important;
    border: 1px solid var(--c-border) !important;
    border-radius: var(--r-md) !important;
}
.vr-create-btn {
    background: var(--c-purple-dim) !important;
    border: 1px solid rgba(139,92,246,0.2) !important;
    color: var(--c-purple) !important;
    border-radius: var(--r-sm) !important;
}
.vr-create-btn:hover { background: var(--c-purple) !important; color: #fff !important; }
.vr-room-card {
    background: var(--c-card) !important;
    border: 1px solid var(--c-border) !important;
    border-radius: var(--r-md) !important;
    transition: all 0.15s !important;
}
.vr-room-card:hover { border-color: rgba(139,92,246,0.2) !important; }
.vr-room-screen, .vr-room-bg { background: var(--c-bg) !important; }
.vr-dock {
    background: var(--c-card) !important;
    border: 1px solid var(--c-border) !important;
    border-radius: var(--r-pill) !important;
    padding: 8px !important;
}
.vr-dock-btn {
    background: var(--c-elevated) !important;
    border: none !important;
    color: var(--c-text-2) !important;
    border-radius: var(--r-sm) !important;
    transition: all 0.15s !important;
}
.vr-dock-btn.active { color: #fff !important; background: var(--c-card) !important; }
.vr-dock-btn.danger { color: var(--c-red) !important; background: rgba(239,68,68,0.08) !important; }
.vr-gate-card {
    background: var(--c-surface) !important;
    border: 1px solid var(--c-border-2) !important;
    border-radius: var(--r-xl) !important;
}
.vr-gate-btn {
    background: var(--c-purple-dim) !important;
    border: 1px solid rgba(139,92,246,0.2) !important;
    color: var(--c-purple) !important;
    border-radius: var(--r-pill) !important;
    font-weight: 700 !important;
}
.vr-gate-btn:hover { background: var(--c-purple) !important; color: #fff !important; }
.vr-live-badge {
    background: rgba(239,68,68,0.12) !important;
    border: 1px solid rgba(239,68,68,0.2) !important;
    color: var(--c-red) !important;
    border-radius: var(--r-pill) !important;
    padding: 4px 10px !important;
    font-size: 0.75rem !important; font-weight: 700 !important;
}
.vr-user-tile {
    background: var(--c-card) !important;
    border: 1.5px solid var(--c-border) !important;
    border-radius: var(--r-lg) !important;
}
.vr-user-tile.speaking { border-color: rgba(16,185,129,0.4) !important; box-shadow: 0 0 20px rgba(16,185,129,0.1) !important; }
